<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>My Website</title>
        <link rel="stylesheet" href="style.css" />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
        />
        <script
            type="module"
            src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"
        ></script>
    </head>
    <body>
        <!-- <h1>Welcome to my website!</h1>
        <p>Here is some content on my website.</p>
        <button onclick="sayHello()">Click me</button> -->
        <!-- &nbsp;<img
                                    src="./image/hi.gif"
                                    style="height: 15px"
                            /></small> -->

        <section>
            <div class="bg">
                <div class="landing">
                    <div class="col">
                        <div class="text1">
                            <h1>ตู้จ่ายยาสามัญประจำบ้าน</h1>
                        </div>
                        <div class="text2 textShineBlack">
                            <p>
                                สวัสดีครับ ผมฮ่องเต้!
                                ผมคือโรบอทที่ถูกสร้างมาเพื่อดูแลรักษา
                                ตู้ยาเครื่องนี้ คุณคงได้รับรหัสลับมาแล้วล่ะสิ
                                คุณจำเป็นต้องใช้มันนะ
                                เพื่อทำให้คุณอาการดีขึ้น
                                ขั้นแรกคุณจะต้องกดปุ่ม สีแดงข้างล่างนี้
                                จากนั้นกรอกรหัสลับที่ได้มาลงไป
                                แล้วรอรับยาอย่างได้เลย!!! 
                            </p>
                        </div>
                        <div class="btn">
                            <button
                                class="button-1 bgShineBlack"
                                role="button"
                                onclick="window.location.href='#section2';"
                            >
                                Start
                            </button>
                        </div>
                    </div>

                    <div class="robot">
                        <model-viewer
                            id="paused-change-demo"
                            camera-controls
                            touch-action="pan-y"
                            autoplay
                            disable-zoom
                            animation-name="Running"
                            ar
                            Pobrfill
                            :focus-visible
                            ar-modes="webxr scene-viewer"
                            shadow-intensity="1"
                            src="./image/RobotExpressive.glb"
                            alt="An animated 3D model of a robot"
                        ></model-viewer>
                        <script>
                            (() => {
                                const modelViewer = document.querySelector(
                                    "#paused-change-demo"
                                );

                                self.setInterval(() => {
                                    modelViewer.animationName =
                                        modelViewer.animationName === "Running"
                                            ? "Wave"
                                            : "Running";
                                }, 1500.0);
                            })();
                        </script>
                    </div>
                </div>
            </div>
        </section>
        <section>
            <div class="container">
                <div class="col-2">
                    <h1 class="title">ใส่รหัส</h1>
                    <div class="form">
                        <div class="input-box">
                            <input
                                class="use-keyboard-input"
                                type="text"
                                id="1234"
                                required
                            />
                            <span>รหัส</span>
                            <i></i>
                        </div>
                    </div>
                    <button id="verify-btn">Verify</button>
                </div>
            </div>
        </section>
        <footer>
            <div class="final_text" id="section2"></div>
            <p>
                Copyright &copy; All rights reserved <br />
                &nbsp&nbsp&nbspDesigned by kussama kiatkhuntod, 2022
            </p>
        </footer>
        <!-- use-keyboard-input -->
        <script src="index.js " type="module"></script>
        <script>
            const Keyboard = {
                elements: {
                    main: null,
                    keysContainer: null,
                    keys: [],
                },

                eventHandlers: {
                    oninput: null,
                    onclose: null,
                },

                properties: {
                    value: "",
                    capsLock: false,
                },

                init() {
                    // Create main elements
                    this.elements.main = document.createElement("div");
                    this.elements.keysContainer = document.createElement("div");

                    // Setup main elements
                    this.elements.main.classList.add(
                        "keyboard",
                        "keyboard--hidden"
                    );
                    this.elements.keysContainer.classList.add("keyboard__keys");
                    this.elements.keysContainer.appendChild(this._createKeys());

                    this.elements.keys =
                        this.elements.keysContainer.querySelectorAll(
                            ".keyboard__key"
                        );

                    // Add to DOM
                    this.elements.main.appendChild(this.elements.keysContainer);
                    document.body.appendChild(this.elements.main);

                    // Automatically use keyboard for elements with .use-keyboard-input
                    document
                        .querySelectorAll(".use-keyboard-input")
                        .forEach((element) => {
                            element.addEventListener("focus", () => {
                                this.open(element.value, (currentValue) => {
                                    element.value = currentValue;
                                });
                            });
                        });
                },

                _createKeys() {
                    const fragment = document.createDocumentFragment();
                    const keyLayout = [
                        "1",
                        "2",
                        "3",
                        "4",
                        "5",
                        "6",
                        "7",
                        "8",
                        "9",
                        "0",
                        "backspace",
                        "q",
                        "w",
                        "e",
                        "r",
                        "t",
                        "y",
                        "u",
                        "i",
                        "o",
                        "p",
                        "caps",
                        "a",
                        "s",
                        "d",
                        "f",
                        "g",
                        "h",
                        "j",
                        "k",
                        "l",
                        "enter",
                        "done",
                        "z",
                        "x",
                        "c",
                        "v",
                        "b",
                        "n",
                        "m",
                        ",",
                        ".",
                        "?",
                        "space",
                    ];

                    // Creates HTML for an icon
                    const createIconHTML = (icon_name) => {
                        return `<i class="material-icons">${icon_name}</i>`;
                    };

                    keyLayout.forEach((key) => {
                        const keyElement = document.createElement("button");
                        const insertLineBreak =
                            ["backspace", "p", "enter", "?"].indexOf(key) !==
                            -1;

                        // Add attributes/classes
                        keyElement.setAttribute("type", "button");
                        keyElement.classList.add("keyboard__key");

                        switch (key) {
                            case "backspace":
                                keyElement.classList.add("keyboard__key--wide");
                                keyElement.innerHTML =
                                    createIconHTML("backspace");

                                keyElement.addEventListener("click", () => {
                                    this.properties.value =
                                        this.properties.value.substring(
                                            0,
                                            this.properties.value.length - 1
                                        );
                                    this._triggerEvent("oninput");
                                });

                                break;

                            case "caps":
                                keyElement.classList.add(
                                    "keyboard__key--wide",
                                    "keyboard__key--activatable"
                                );
                                keyElement.innerHTML =
                                    createIconHTML("capslock");

                                keyElement.addEventListener("click", () => {
                                    this._toggleCapsLock();
                                    keyElement.classList.toggle(
                                        "keyboard__key--active",
                                        this.properties.capsLock
                                    );
                                });

                                break;

                            case "enter":
                                keyElement.classList.add("keyboard__key--wide");
                                keyElement.innerHTML = createIconHTML("return");

                                keyElement.addEventListener("click", () => {
                                    this.properties.value += "\n";
                                    this._triggerEvent("oninput");
                                });

                                break;

                            case "space":
                                keyElement.classList.add(
                                    "keyboard__key--extra-wide"
                                );
                                keyElement.innerHTML =
                                    createIconHTML("space_bar");

                                keyElement.addEventListener("click", () => {
                                    this.properties.value += " ";
                                    this._triggerEvent("oninput");
                                });

                                break;

                            case "done":
                                keyElement.classList.add(
                                    "keyboard__key--wide",
                                    "keyboard__key--dark"
                                );
                                keyElement.innerHTML = createIconHTML("cancel");

                                keyElement.addEventListener("click", () => {
                                    this.close();
                                    this._triggerEvent("onclose");
                                });

                                break;

                            default:
                                keyElement.textContent = key.toLowerCase();

                                keyElement.addEventListener("click", () => {
                                    this.properties.value += this.properties
                                        .capsLock
                                        ? key.toUpperCase()
                                        : key.toLowerCase();
                                    this._triggerEvent("oninput");
                                });

                                break;
                        }

                        fragment.appendChild(keyElement);

                        if (insertLineBreak) {
                            fragment.appendChild(document.createElement("br"));
                        }
                    });

                    return fragment;
                },

                _triggerEvent(handlerName) {
                    if (typeof this.eventHandlers[handlerName] == "function") {
                        this.eventHandlers[handlerName](this.properties.value);
                    }
                },

                _toggleCapsLock() {
                    this.properties.capsLock = !this.properties.capsLock;

                    for (const key of this.elements.keys) {
                        if (key.childElementCount === 0) {
                            key.textContent = this.properties.capsLock
                                ? key.textContent.toUpperCase()
                                : key.textContent.toLowerCase();
                        }
                    }
                },

                open(initialValue, oninput, onclose) {
                    this.properties.value = initialValue || "";
                    this.eventHandlers.oninput = oninput;
                    this.eventHandlers.onclose = onclose;
                    this.elements.main.classList.remove("keyboard--hidden");
                },

                close() {
                    this.properties.value = "";
                    this.eventHandlers.oninput = oninput;
                    this.eventHandlers.onclose = onclose;
                    this.elements.main.classList.add("keyboard--hidden");
                },
            };

            window.addEventListener("DOMContentLoaded", function () {
                Keyboard.init();
            });
        </script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    </body>
</html>
